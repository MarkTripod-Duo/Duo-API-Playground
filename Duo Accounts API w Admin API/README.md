
In this collection, we've designed a workflow that iterates over your complete list of child accounts (utilizing the `duoChildAccounts` variable) to retrieve data from the following Duo endpoints, and more.
- Users
- Endpoints
- Phones
- Hardware Tokens
- Integrations
- Account Settings
- Authentication Logs
- Authentication Attempts Report
- Users with Authentication Attempts
- Telephony Credits Used Reports

### NOTE: Before referring to steps below please see [Prerequisites](https://github.com/it-jonjon/Duo-API-Playground/blob/main/README.md#prerequisites).

## üöÄ Getting started with this collection
**Step 1**: (If necessary): Refer to the Duo Accounts API collection, and ensure the Accounts API request credentials have been populated in the global variables.

**Step 2**: To call an individual endpoint, select the request, and click the Send button in the request window. You should see individual Duo API responses from each account in the `duoChildAccounts` array.

Alternatively, you can run these requests en masse via the Collection Runner in Postman. To use the Collection Runner, click the three dots next to the Duo Accounts API with Admin API collection, and select Run Collection. In the Collection Runner, select "Run Duo Accounts API with Admin API". You should see responses for each child account for each endpoint in the list.

## üîç Variable Reference
Below is a list of variables defined within this collection. Some variables are dynamically generated during API interactions, while others need to be manually configured.

See [Using Variables](https://learning.postman.com/docs/sending-requests/variables/) for further insight on variable use in Postman.

| Variable Name | Description | Scope |
|---------------|-------------|-------|
| `accounts_api_ikey` | Your Accounts API Integration Key. This needs to be manually set in the global variables | Global |
| `accounts_api_skey` | Your Accounts API Secret Key. This needs to be manually set in the global variables | Global |
| `accounts_api_host` | Your Accounts API Hostname. This needs to be manually set in the global variables | Global |
| `timestampHeader` | The current date-time in RFC 2822 format, used as the "Date" header in Duo API requests. Set dynamically during the creation of the authorization header | Global |
| `hmacAuthHeader` | Contains the HMAC-SHA1 signature for Duo API requests, which acts as the HTTP password in Duo's HTTP Basic Authentication. Unique for each request and dynamically generated by the getAuthHeader function | Global |
| `duoChildAccounts` | Stores an object mapping between account IDs and their respective account names, providing a reference for pairing these two variables. Dynamically set in the pre-request script of this collection | Global |
| `accountId` | Used to store the account ID of the child account currently being processed. This variable is dynamically set from the ChildAccountIds array during the processing cycle | Global |
| `next_offset` | Used to manage pagination in the Duo API requests. It's pulled from the API response's metadata and signifies the offset for the subsequent set of data. If additional data is to be retrieved from the currently processed account, next_offset is updated with the new value; otherwise, it is reset to 0. | Global |
| `mintime` | Determines the lower boundary for the Unix timestamp in milliseconds for returned records. This needs to be manually set in the collection variables | Collection |
| `maxtime` | Determines the upper boundary for the Unix timestamp in milliseconds for returned records. This needs to be manually set in the collection variables | Collection |
